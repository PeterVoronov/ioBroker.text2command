(this["webpackJsonptext2command-react"]=this["webpackJsonptext2command-react"]||[]).push([[0],{228:function(e){e.exports=JSON.parse('{"a":"2.0.0"}')},359:function(e,t,a){e.exports=a(418)},364:function(e,t,a){},407:function(e){e.exports=JSON.parse('{"Select rule":"Select rule","System":"System ","Language":"Language","Answer in id":"Answer in ID","Processor\'s id":"Processor\'s ID","Timeout for processor":"Timeout for processor","Settings":"Settings","Cancel":"Cancel","Test phrase":"Test phrase","Argument":"Argument","Confirmation text":"Confirmation text","Keywords":"Keywords","Interrupt processing":"Interrupt processing","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"You can use %s, that will be replaced with current value of state. %u will be replaced by unit","Ok":"Ok","Create Rule":"Create Rule","Are you sure?":"Are you sure?","You want to delete: %s":"You want to delete: %s","Refresh":"Refresh","Remove rule":"Remove rule","Search rule":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","lang_en":"english","lang_de":"German","lang_ru":"russian","ms":"ms","Create rule":"Create rule","refresh":"Refresh","Save":"Save"}')},408:function(e){e.exports=JSON.parse('{"Select rule":"Regel ausw\xe4hlen","System":"System","Language":"Sprache","Answer in id":"Antwort in ID","Processor\'s id":"Prozessor-ID","Timeout for processor":"Timeout f\xfcr den Prozessor","Settings":"Einstellungen","Cancel":"Abbrechen","Test phrase":"Testphrase","Argument":"Argument","Confirmation text":"Best\xe4tigungstext","Keywords":"Schl\xfcsselw\xf6rter","Interrupt processing":"Verarbeitung unterbrechen","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"Sie k\xf6nnen %s verwenden, das durch den aktuellen Statuswert ersetzt wird. %u wird durch Einheit ersetzt","Ok":"OK","Create Rule":"Regel erstellen","Are you sure?":"Sind Sie sicher?","You want to delete: %s":"Sie m\xf6chten l\xf6schen: %s","refresh":"Aktualisieren","lang_en":"Englisch","lang_de":"Deutsch","lang_ru":"Russisch","ms":"ms","Remove rule":"Regel entfernen","Refresh":"Aktualisierung","Search rule":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Create rule":"Regel erstellen","Save":"Speichern"}')},409:function(e){e.exports=JSON.parse('{"Select rule":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","System":"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","Language":"\u044f\u0437\u044b\u043a","Answer in id":"\u041e\u0442\u0432\u0435\u0442 \u0432 ID","Processor\'s id":"ID \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430","Timeout for processor":"\u0422\u0430\u0439\u043c-\u0430\u0443\u0442 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430","Settings":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","Cancel":"\u041e\u0442\u043c\u0435\u043d\u0430","Test phrase":"\u0422\u0435\u0441\u0442\u043e\u0432\u0430\u044f \u0444\u0440\u0430\u0437\u0430","Argument":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440","Confirmation text":"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f","Keywords":"\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430","Interrupt processing":"\u041f\u0440\u0435\u0440\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c %s, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d \u0442\u0435\u043a\u0443\u0449\u0438\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f. %u \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u043e \u043d\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u044b \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f","Ok":"Ok","Create Rule":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Are you sure?":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?","You want to delete: %s":"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c: %s","Refresh":"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c","Remove rule":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Create rule":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Search rule":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","lang_en":"\u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439","lang_de":"\u041d\u0435\u043c\u0435\u0446\u043a\u0438\u0439","lang_ru":"\u0440\u0443\u0441\u0441\u043a\u0438\u0439","ms":"\u043c\u0441","Save":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}')},410:function(e){e.exports=JSON.parse('{"Select rule":"Selecionar regra","System":"Sistema","Language":"L\xedngua","Answer in id":"Resposta em ID","Processor\'s id":"ID do processador","Timeout for processor":"Tempo limite do processador","Settings":"Configura\xe7\xf5es","Cancel":"Cancelar","Test phrase":"Frase de teste","Argument":"Argumento","Confirmation text":"Texto de confirma\xe7\xe3o","Keywords":"Palavras-chave","Interrupt processing":"Interromper o processamento","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"Voc\xea pode usar %s, que ser\xe1 substitu\xeddo pelo valor atual do estado. %u ser\xe1 substitu\xeddo por unidade","Ok":"Ok","Create Rule":"Criar regra","Are you sure?":"Voc\xea tem certeza?","You want to delete: %s":"Voc\xea deseja excluir: %s","refresh":"Atualizar","lang_en":"Ingl\xeas","lang_de":"alem\xe3o","lang_ru":"russo","ms":"ms","Remove rule":"Remover regra","Refresh":"Atualizar","Search rule":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Create rule":"Criar regra","Save":"Salve \ue051"}')},411:function(e){e.exports=JSON.parse('{"Select rule":"Selecteer regel","System":"Systeem","Language":"Taal","Answer in id":"Antwoord in ID","Processor\'s id":"Verwerker ID","Timeout for processor":"Time-out voor processor","Settings":"Instellingen","Cancel":"Annuleer","Test phrase":"Testzin","Argument":"Argument","Confirmation text":"Bevestigingstekst","Keywords":"Sleutelwoorden","Interrupt processing":"Verwerking onderbreken","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"U kunt %s gebruiken, dat zal worden vervangen door de huidige waarde van de staat. %u wordt vervangen door eenheid","Ok":"OK","Create Rule":"Cre\xeber regel","Are you sure?":"Weet je het zeker?","You want to delete: %s":"Je wilt verwijderen: %s","refresh":"Vernieuwen","lang_en":"Engels","lang_de":"Duitse","lang_ru":"Russisch","ms":"ms","Remove rule":"Regel verwijderen","Refresh":"Vernieuwen","Search rule":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Create rule":"Cre\xeber regel","Save":"Sparen"}')},412:function(e){e.exports=JSON.parse('{"Select rule":"S\xe9lectionnez la r\xe8gle","System":"Syst\xe8me","Language":"Langue","Answer in id":"R\xe9ponse dans l\'ID","Processor\'s id":"ID du processeur","Timeout for processor":"D\xe9lai d\'expiration pour le processeur","Settings":"Param\xe8tres","Cancel":"Annuler","Test phrase":"Expression de test","Argument":"Argument","Confirmation text":"Texte de confirmation","Keywords":"Mots cl\xe9s","Interrupt processing":"Interrompre le traitement","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"Vous pouvez utiliser %s, qui sera remplac\xe9 par la valeur actuelle de l\'\xe9tat. %u sera remplac\xe9 par l\'unit\xe9","Ok":"Ok","Create Rule":"Cr\xe9er une r\xe8gle","Are you sure?":"\xcates-vous s\xfbr?","You want to delete: %s":"Vous souhaitez supprimer: %s","refresh":"Rafra\xeechir","lang_en":"Anglais","lang_de":"allemand","lang_ru":"russe","ms":"ms","Remove rule":"Supprimer la r\xe8gle","Refresh":"Rafra\xeechir","Search rule":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Create rule":"Cr\xe9er une r\xe8gle","Save":"sauver"}')},413:function(e){e.exports=JSON.parse('{"Select rule":"Seleziona la regola","System":"Sistema","Language":"linguaggio","Answer in id":"Risposta in ID","Processor\'s id":"ID del processore","Timeout for processor":"Timeout per processore","Settings":"impostazioni","Cancel":"Annulla","Test phrase":"Frase di prova","Argument":"Discussione","Confirmation text":"Testo di conferma","Keywords":"parole","Interrupt processing":"Interrompere l\'elaborazione","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"Puoi usare %s, che verr\xe0 sostituito con il valore corrente di stato. %u verr\xe0 sostituito dall\'unit\xe0","Ok":"Ok","Create Rule":"Crea regola","Are you sure?":"Sei sicuro?","You want to delete: %s":"Vuoi eliminare: %s","refresh":"ricaricare","lang_en":"Inglese","lang_de":"Tedesco","lang_ru":"russo","ms":"ms","Remove rule":"Rimuovi regola","Refresh":"ricaricare","Search rule":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Create rule":"Crea regola","Save":"Salva"}')},414:function(e){e.exports=JSON.parse('{"Select rule":"Seleccionar regla","System":"Sistema","Language":"Idioma","Answer in id":"Respuesta en ID","Processor\'s id":"ID del procesador","Timeout for processor":"Tiempo de espera para el procesador","Settings":"Configuraciones","Cancel":"Cancelar","Test phrase":"Frase de prueba","Argument":"Argumento","Confirmation text":"Texto de confirmaci\xf3n","Keywords":"Palabras clave","Interrupt processing":"Procesamiento de interrupci\xf3n","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"Puede usar %s, que se reemplazar\xe1 con el valor actual del estado. %u ser\xe1 reemplazado por unidad","Ok":"Okay","Create Rule":"Crear regla","Are you sure?":"\xbfEst\xe1s seguro?","You want to delete: %s":"Desea eliminar: %s","refresh":"Actualizar","lang_en":"Ingl\xe9s","lang_de":"alem\xe1n","lang_ru":"ruso","ms":"ms","Remove rule":"Eliminar regla","Refresh":"Actualizar","Search rule":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Create rule":"Crear regla","Save":"Salvar"}')},415:function(e){e.exports=JSON.parse('{"Select rule":"Wybierz regu\u0142\u0119","System":"System","Language":"J\u0119zyk","Answer in id":"Odpowiedz w ID","Processor\'s id":"ID procesora","Timeout for processor":"Limit czasu dla procesora","Settings":"Ustawienia","Cancel":"Anuluj","Test phrase":"Testowa fraza","Argument":"Argument","Confirmation text":"Tekst potwierdzaj\u0105cy","Keywords":"S\u0142owa kluczowe","Interrupt processing":"Przerwa\u0107 przetwarzanie","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"Mo\u017cesz u\u017cy\u0107 %s, kt\xf3ry zostanie zast\u0105piony bie\u017c\u0105c\u0105 warto\u015bci\u0105 stanu. %u zostanie zast\u0105pione przez jednostk\u0119","Ok":"Ok","Create Rule":"Stw\xf3rz zasad\u0119","Are you sure?":"Jeste\u015b pewny?","You want to delete: %s":"Chcesz usun\u0105\u0107: %s","refresh":"Od\u015bwie\u017ca\u0107","lang_en":"j\u0119zyk angielski","lang_de":"Niemiecki","lang_ru":"Rosyjski","ms":"ms","Remove rule":"Usu\u0144 regu\u0142\u0119","Refresh":"Od\u015bwie\u017ca\u0107","Search rule":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u043e","Create rule":"Stw\xf3rz zasad\u0119","Save":"Zapisa\u0107"}')},416:function(e){e.exports=JSON.parse('{"Select rule":"\u9009\u62e9\u89c4\u5219","System":"\u7cfb\u7edf","Language":"\u8bed\u8a00","Answer in id":"\u8f93\u5165\u7b54\u6848","Processor\'s id":"\u5904\u7406\u5668ID","Timeout for processor":"\u5904\u7406\u5668\u8d85\u65f6","Settings":"\u8bbe\u5b9a\u503c","Cancel":"\u53d6\u6d88","Test phrase":"\u6d4b\u8bd5\u8bcd","Argument":"\u8bba\u636e","Confirmation text":"\u786e\u8ba4\u6587\u5b57","Keywords":"\u5173\u952e\u8bcd","Interrupt processing":"\u4e2d\u65ad\u5904\u7406","You can use %s, that will be replaced with current value of state. %u will be replaced by unit":"\u60a8\u53ef\u4ee5\u4f7f\u7528\uff05s\uff0c\u5b83\u5c06\u66ff\u6362\u4e3astate\u7684\u5f53\u524d\u503c\u3002 \uff05u\u5c06\u88ab\u5355\u4f4d\u66ff\u6362","Ok":"\u597d","Create Rule":"\u5efa\u7acb\u89c4\u5219","Are you sure?":"\u4f60\u786e\u5b9a\u5417\uff1f","You want to delete: %s":"\u60a8\u8981\u5220\u9664\uff1a\uff05s","refresh":"\u5237\u65b0","lang_en":"\u82f1\u8bed","lang_de":"\u5fb7\u8bed","lang_ru":"\u4fc4\u8bed","ms":"ms","Remove rule":"\u5220\u9664\u89c4\u5219","Refresh":"\u5237\u65b0","Search rule":"\u041d\u0430\u0439\u0442\u0438\u043f\u0440\u0430\u0432\u0438\u043b\u043e","Create rule":"\u5efa\u7acb\u89c4\u5219","Save":"\u4fdd\u5b58"}')},418:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(18),l=a.n(s),i=a(452),o=a(451),u=a(446),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function d(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(364);var m=a(57),p=a(58),g=a(63),h=a(62),f=a(5),v=a(216),b=a.n(v),S=a(16),R=a.n(S),w=a(327),O=a.n(w),C=a(147),k=a(24),y=a.n(k),E=a(37),x=a(10),j=a(54),D=a(184),I=a(187),A=a(328),T=a.n(A),L=a(453),N=a(3),z=a(159),U=(a(373),a(50)),B=a(450),M=a(346),_=a(298),W=a(302),P=a(342),F=a.n(P),Y=a(311),J=a(220),V=a(297),K=a(301),q=a(115),G=a(299),H=a(225),X=a(308),Z=a(449),$=a(296),Q=a(212),ee=a(434),te=a(221),ae=a(336),ne=a.n(ae),re=a(337),se=a.n(re),le=a(338),ie=a.n(le),oe=a(217),ue=a(144),ce=a.n(ue),de=a(341),me=a.n(de),pe=a(339),ge=a.n(pe),he=a(340),fe=a.n(he),ve=a(176),be=a.n(ve),Se=a(295),Re=a(219),we=a(314),Oe=a(312),Ce=a(334),ke=a.n(Ce),ye=a(333),Ee=a.n(ye),xe=a(332),je=a.n(xe),De=a(181),Ie=r.a.forwardRef((function(e,t){var a,s=e.name,l=e.handleEdit,i=e.rule,o=e.isDragging,u=e.connectDragSource,c=e.connectDropTarget,d=e.id,m=e.selectRule,p=e.selectedRule,g=e._break,h=e.matchingRules,f=e.unsavedRules,v=e.index,b=e.theme,S=e.removeMatched,R=e.words,w=Object(Se.a)({listItem:{cursor:"pointer",transition:"background-color 0.3s linear",position:"relative"},listItemText:{"& span":{color:b.palette.text.primary},"& p":{color:b.palette.text.secondary,textOverflow:"ellipsis",overflow:"hidden"}},dot:{position:"absolute",backgroundColor:"red",top:5,right:15,width:10,height:10,borderRadius:"50%"},maximize:{color:null===(a=b.palette.error)||void 0===a?void 0:a.dark,marginBottom:-b.spacing(2)}})(),O=Object(n.useRef)(null);u(O),c(O);var C=o?0:1;Object(n.useImperativeHandle)(t,(function(){return{getNode:function(){return O.current}}}));var k=Object(n.useCallback)((function(){return m(d)}),[d,m]),y=Object(n.useCallback)((function(){return l(d)}),[d,l]),E=[{icon:g?r.a.createElement(je.a,{className:w.maximize}):r.a.createElement(Ee.a,{color:"primary"})},{icon:r.a.createElement(ke.a,null),handleClick:y}],x=Object(n.useState)(""),j=Object(D.a)(x,2),I=j[0],A=j[1];Object(n.useEffect)((function(){if(h.length){var e=h.find((function(e){return e.indexOf===v}));e&&(setTimeout((function(){var e;return A(null===b||void 0===b||null===(e=b.palette)||void 0===e?void 0:e.secondary.dark)}),e.timer),setTimeout((function(){var e,t;A(p.id===d?null===b||void 0===b||null===(e=b.palette)||void 0===e||null===(t=e.background)||void 0===t?void 0:t.default:""),(g||v===h[h.length-1].indexOf)&&S()}),1500*(e.index+1)))}}),[h]);var T=i!==s?i:"";return T+="".concat(T?" ":"","[").concat(R,"]"),r.a.createElement("div",{ref:O,style:{opacity:C,backgroundColor:I}},r.a.createElement(Re.a,{onClick:k,selected:(null===p||void 0===p?void 0:p.id)===d,className:w.listItem},r.a.createElement(we.a,{primary:s,secondary:T,className:w.listItemText}),r.a.createElement(Oe.a,null,n.Children.toArray(E.map((function(e,t){var a=e.icon,n=e.handleClick;return r.a.createElement(oe.a,{disabled:!t,onClick:n},a)})))),f[d]&&r.a.createElement(Q.a,{className:w.dot})))})),Ae="rule",Te=Object(De.DropTarget)(Ae,{hover(e,t,a){if(!a)return null;var n=a.getNode();if(!n)return null;var r=t.getItem().index,s=e.index;if(r!==s){var l=n.getBoundingClientRect(),i=(l.bottom-l.top)/2,o=t.getClientOffset().y-l.top;r<s&&o<i||r>s&&o>i||(e.moveRule(r,s),t.getItem().index=s)}}},(function(e){return{connectDropTarget:e.dropTarget()}}))(Object(De.DragSource)(Ae,{beginDrag:function(e){return{id:e.id,index:e.index}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Ie)),Le=Object(f.a)((function(e){return{tooltip:{fontSize:14}}}))(Y.a),Ne=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={textCommand:"",matchingRules:[],isSettingsDialogOpen:!1,isConfirmRemoveDialogOpen:!1,isSearchActive:!1,filteredRules:[],searchedValue:"",localSettings:{language:"",processorId:"",processorTimeout:1e3,sayitInstance:""}},e.getDefaultSettings=function(){e.setState({localSettings:Object(x.a)({},e.props.settings)})},e.handleTextCommand=function(t){e.setState({textCommand:t.target.value})},e.handleSubmit=function(t,a){if("Enter"===t.key||a){var n=e.findMatchingRules();e.setState({matchingRules:n.map((function(e,t){return{indexOf:e,timer:1500*t,index:t}}))})}},e.removeMatched=function(){e.setState({matchingRules:[]})},e.handleOpenSettingsModal=function(){e.setState({isSettingsDialogOpen:!0})},e.handleDialogSelectIdSubmit=function(t,a){e.setState({localSettings:Object(x.a)(Object(x.a)({},e.state.localSettings),{},{[a]:t})})},e.handleDelete=function(){e.props.removeRule(e.props.selectedRule.id),e.handleCloseConfirmRemoveDialog()},e.handleCloseConfirmRemoveDialog=function(){e.setState({isConfirmRemoveDialogOpen:!1})},e.handleSearch=function(t){var a=e.props.rules.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));e.setState({filteredRules:a||[],searchedValue:t.target.value})},e.toggleSearch=Object(E.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({isSearchActive:!e.state.isSearchActive});case 2:case"end":return t.stop()}}),t)}))),e.createSettingsModal=function(){var t=R.a.t,a=e.props.classes,s=function(){e.setState({isSettingsDialogOpen:!1,isSettingsWasNotSaved:!0})},l=function(t,a){var n=t.target.value;"language"===a&&"system"===n&&(n=""),e.setState({localSettings:Object(x.a)(Object(x.a)({},e.state.localSettings),{},{[a]:n})})};return r.a.createElement(V.a,{open:e.state.isSettingsDialogOpen,onClose:s,fullWidth:!0,onExited:e.getDefaultSettings},r.a.createElement(K.a,null,r.a.createElement(q.a,{variant:"h4",component:"span",align:"center"},t("Settings"))),r.a.createElement(G.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(te.a,{fullWidth:!0,classes:{root:a.settingsItem}},r.a.createElement(ee.a,{id:"demo-simple-select-label"},t("Language")),r.a.createElement(H.a,{classes:{root:a.width100},onChange:function(e){return l(e,"language")},value:e.state.localSettings.language?e.state.localSettings.language:"system"},r.a.createElement(X.a,{value:"system"},t("System")),n.Children.toArray(["en","de","ru"].map((function(e){return r.a.createElement(X.a,{value:e},t("lang_"+e))}))))),r.a.createElement(te.a,{fullWidth:!0,classes:{root:a.settingsItem}},r.a.createElement(Z.a,{label:t("Answer in id"),value:e.state.localSettings.sayitInstance,onClick:function(){return e.setState({showDialogSelectId:!0,selectedSettingsName:"sayitInstance"})}})),r.a.createElement(te.a,{fullWidth:!0,classes:{root:a.settingsItem}},r.a.createElement(Z.a,{label:t("Processor's id"),value:e.state.localSettings.processorId,onClick:function(){return e.setState({showDialogSelectId:!0,selectedSettingsName:"processorId"})}})),r.a.createElement(te.a,{fullWidth:!0,classes:{root:a.settingsItem}},r.a.createElement(Z.a,{label:t("Timeout for processor"),helperText:t("ms"),value:e.state.localSettings.processorTimeout,onChange:function(e){return l(e,"processorTimeout")}})))),r.a.createElement(_.a,null,r.a.createElement($.a,{onClick:function(){e.props.saveSettings(e.state.localSettings,s)}},"Ok"),r.a.createElement($.a,{onClick:s},R.a.t("Cancel"))))},e.mainIcons=[{icon:r.a.createElement(ne.a,null),handler:function(){return e.props.handleOpen()},tooltip:R.a.t("Create rule")},{icon:r.a.createElement(se.a,null),handler:function(){return e.handleOpenSettingsModal()},tooltip:R.a.t("Settings")},{icon:r.a.createElement(ie.a,null),handler:function(){return console.log("refresh")},tooltip:R.a.t("Refresh")}],e.createIcons=function(e){return e.map((function(e,t){var a=e.icon,n=e.handler,s=e.tooltip;return r.a.createElement(Le,{title:s,key:t},r.a.createElement(oe.a,{onClick:n},a))}))},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.props.settings!==e.settings&&this.props.settings&&this.getDefaultSettings()}},{key:"findMatchingRules",value:function(){var e=this.state.textCommand;return e?window.findMatched(e,JSON.parse(JSON.stringify(this.props.rules))):[]}},{key:"renderSelectIdDialog",value:function(){var e=this;return this.state.showDialogSelectId?r.a.createElement(be.a,{socket:this.props.socket,title:"Select ID",onClose:function(){return e.setState({showDialogSelectId:!1})},onOk:function(t){return e.handleDialogSelectIdSubmit(t,e.state.selectedSettingsName)}}):null}},{key:"renderConfirmDialog",value:function(){return this.state.isConfirmRemoveDialogOpen?r.a.createElement(V.a,{open:this.state.isConfirmRemoveDialogOpen,onClose:this.handleCloseConfirmRemoveDialog,fullWidth:!0},r.a.createElement(K.a,null,R.a.t("Are you sure?")),r.a.createElement(G.a,null,r.a.createElement(q.a,{variant:"h5",component:"h5"},R.a.t("You want to delete")+": ",r.a.createElement("strong",null,this.props.selectedRule.name)),r.a.createElement(_.a,null,r.a.createElement($.a,{onClick:this.handleDelete},R.a.t("Ok")),r.a.createElement($.a,{onClick:this.handleCloseConfirmRemoveDialog,color:"primary"},R.a.t("Cancel"))))):null}},{key:"render",value:function(){var e=this,t=this.props,a=t.selectedRule,n=t.moveRule,s=t.handleEdit,l=t.rules,i=t.selectRule,o=t.classes,u=t.isMdScreen,c=t.closeDrawer,d=this.state,m=d.filteredRules,p=d.isSearchActive,g=d.searchedValue,h=this.createSettingsModal(),f=p&&g.length?m:l,v=[];return a&&a.id&&v.push({icon:!p&&r.a.createElement(ge.a,null),handler:function(){return e.setState({isConfirmRemoveDialogOpen:!0})},tooltip:R.a.t("Remove rule"),key:"delete"}),l.length&&v.push({icon:p?r.a.createElement(fe.a,null):r.a.createElement(me.a,null),handler:function(){return e.toggleSearch()},tooltip:R.a.t("Search rule"),key:"search"}),r.a.createElement(Q.a,{className:o.main},r.a.createElement(W.a,{position:"static",classes:{root:o.toolbar}},p?r.a.createElement(Z.a,{className:o.search,onChange:this.handleSearch,value:this.state.searchedValue,InputProps:{endAdornment:this.state.searchedValue?r.a.createElement(oe.a,{onClick:function(){return e.setState({searchedValue:""})}},r.a.createElement(ce.a,null)):void 0},autoFocus:!0}):r.a.createElement("div",null,this.createIcons(this.mainIcons)),r.a.createElement("div",null,this.createIcons(v)),!u&&r.a.createElement(oe.a,{className:o.closeBtn,onClick:c},r.a.createElement(ce.a,null))),r.a.createElement(B.a,{backend:M.a},r.a.createElement(J.a,{className:o.list},f.map((function(t,l){return r.a.createElement(Te,Object.assign({theme:e.props.theme,handleEdit:s},t,{index:l,moveRule:n,key:t.id,selectRule:i,selectedRule:a,matchingRules:e.state.matchingRules,unsavedRules:e.props.unsavedRules,removeMatched:e.removeMatched}))})))),r.a.createElement(W.a,{className:o.test,variant:"dense"},r.a.createElement(Z.a,{onChange:this.handleTextCommand,label:R.a.t("Test phrase"),variant:"outlined",size:"small",color:"primary",className:Object(N.a)("outlined-basic",o.root),onKeyDown:this.handleSubmit,value:this.state.textCommand,inputProps:{style:{padding:"10px 10px"}},InputProps:{endAdornment:this.state.textCommand?r.a.createElement(oe.a,{onClick:function(){return e.setState({textCommand:""})}},r.a.createElement(ce.a,null)):void 0}}),r.a.createElement(oe.a,{variant:"outlined",onClick:function(t){return e.handleSubmit(t,!0)}},r.a.createElement(F.a,{className:o.play}))),h,this.renderConfirmDialog(),this.renderSelectIdDialog())}}]),a}(n.Component),ze=Object(f.a)((function(e){return{test:{width:"100%",boxSizing:"border-box",height:64},main:{minWidth:330,overflow:"hidden",height:"100%"},toolbar:{background:e.palette.primary.main,position:"relative"},list:{height:"calc(100% - 64px - 64px - 18px)",overflowX:"hidden",overflowY:"auto"},root:{width:"calc(100% - 48px)"},header:{minHeight:44,height:"auto",padding:e.spacing(1.3),border:"1px solid ".concat(e.palette.divider)},textInput:{width:"60%",[e.breakpoints.down("sm")]:{width:"100%"}},settingsTitle:{fontSize:"20px",maxWidth:145,[e.breakpoints.down("sm")]:{marginBottom:e.spacing(1)}},settingsContent:{[e.breakpoints.down("sm")]:{flexDirection:"column",display:"flex"}},closeBtn:{position:"absolute",top:0,right:0,color:e.palette.common.white},search:{flexBasis:"80%",[e.breakpoints.down("sm")]:{flexBasis:"70%"}},settingsItem:{marginBottom:e.spacing(3)},width100:{width:"100%"}}}))(Ne),Ue=a(84),Be=a(448),Me=a(188),_e=a(344),We=a.n(_e),Pe=a(343),Fe=a.n(Pe),Ye=a(112),Je=a.n(Ye),Ve=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).defaultState={words:R.a.t("Create Rule"),name:R.a.t("Create Rule"),_break:!1,editable:!1,args:[{default:R.a.t("Argument")+" 1"},{default:R.a.t("Argument")+" 2"}],ack:{name:"",default:"".concat(R.a.t("Confirmation text"))},id:0},e.state={localRule:null,showDialog:!1},e.createConfirmModalActions=function(){var t=R.a.t,a=e.props,n=a.updateConfig,s=a.classes,l=a.selectRule,i=a.pendingSelectedRuleId,o=a.clearStateOnConfirmModalUnmount,u=a.revertChangesFromConfig,c=e.state.localRule,d=function(){var t=Object(E.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:e.closeConfirmDialog();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(E.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(c);case 2:return t.next=4,l(i);case 4:return t.next=6,o(c.id);case 6:e.closeConfirmDialog();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){var t=Object(E.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(c);case 2:return t.next=4,l(i);case 4:return t.next=6,o();case 6:e.closeConfirmDialog();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(te.a,{className:s.submitForm},r.a.createElement($.a,{variant:"contained",onClick:p,color:"primary",className:s.saveAndGoBtn},t("Save and go")),r.a.createElement($.a,{onClick:m,variant:"contained",color:"secondary"},t("Don't save and go")),r.a.createElement($.a,{variant:"contained",className:s.btnDanger,onClick:d},t("Cancel")))},e.createSaveSettingsForm=function(){var t=R.a.t,a=e.props,n=a.updateConfig,s=a.classes,l=a.revertChangesFromConfig,i=a.selectedRule,o=e.state.localRule,u=function(){var t=Object(E.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(o);case 2:e.setState({isLocalStateWasUpdated:!1});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var t=Object(E.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(o);case 2:return t.next=4,e.setState({localRule:i,isLocalStateWasUpdated:!1});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return e.state.isLocalStateWasUpdated?r.a.createElement(te.a,{className:s.submitForm},r.a.createElement($.a,{onClick:u,variant:"contained",color:"primary"},t("Save")),r.a.createElement($.a,{variant:"contained",className:s.btnDanger,onClick:c},t("Cancel"))):r.a.createElement("div",{className:e.props.classes.emptyButtons})},e.closeConfirmDialog=function(){e.setState({isLocalStateWasUpdated:!1,confirmChanges:!1})},e.createInput=function(t){var a=t.value,n=t.label,s=t.onChange,l=t.type,i=t.onClick,o=t.note,u=t.disabled,c=void 0===u?!e.state.localRule:u,d=t.keywords,m=t.key,p=t.onSwitchChange;if(void 0!==a&&null!==a||n||d){var g=e.props.classes;return"checkbox"!==l?r.a.createElement(Z.a,{variant:"outlined",size:"small",disabled:c,value:a,helperText:o||"",onClick:i,onChange:s,key:m,className:Object(N.a)("outlined-basic",g.textField)}):r.a.createElement(te.a,{classes:{root:g.switchControl}},r.a.createElement(Be.a,{key:m,onClick:p,color:"primary",disabled:c,checked:!!a}))}},e.createOptionsData=function(){var t,a,n,r,s,l,i,o,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state,c=u.localRule,d=c.args,m=c.ack,p=c.editable,g=c._break,h=R.a.t,f=e.createInput,v=e.handlers,b=function(){return void 0!==p&&!1===p};return[{title:h("Keywords"),item:f({value:(null===(t=e.state.localRule)||void 0===t?void 0:t.words)||"",onChange:v.keywordsText,keywords:!0,disabled:b(),key:"keywords"}),id:1},{title:h("Interrupt processing"),item:f({type:"checkbox",value:g,onSwitchChange:v.breakOnSwitch,key:"break"}),id:2},{title:d&&(null===(a=d[0])||void 0===a?void 0:a.name),item:f({value:d&&(null===(n=e.state.localRule.args[0])||void 0===n?void 0:n.default),label:d&&(null===(r=d[0])||void 0===r?void 0:r.name),type:d&&(null===(s=d[0])||void 0===s?void 0:s.type),onClick:e.handleSetDialogClick.bind(Object(Ue.a)(e),d&&d[0]),onSwitchChange:v.param1OnSwitch,key:"Param1"}),id:3},{title:d&&(null===(l=d[1])||void 0===l?void 0:l.name),item:f({value:d&&(null===(i=e.state.localRule.args[1])||void 0===i?void 0:i.default),label:d&&(null===(o=d[1])||void 0===o?void 0:o.name),onChange:v.param2Text,key:"Param2"}),id:4},{title:h("Confirmation text"),item:f({value:m&&m.default,label:m&&m.name,note:h("You can use %s, that will be replaced with current value of state. %u will be replaced by unit"),type:m&&m.type,key:"confirmationText",onChange:v.confirmText,onSwitchChange:v.confirmOnSwitch}),id:5}]},e.createInputHandlers=function(){var t=Object(Ue.a)(e);return{keywordsText(e){t.setState({localRule:Object(x.a)(Object(x.a)({},t.state.localRule),{},{words:e.target.value}),isLocalStateWasUpdated:!0})},param2Text(e){t.setState({localRule:Object(x.a)(Object(x.a)({},t.state.localRule),{},{args:t.state.localRule.args.map((function(t,a){return a>0?Object(x.a)(Object(x.a)({},t),{},{default:e.target.value}):t}))}),isLocalStateWasUpdated:!0})},confirmText(e){t.setState({localRule:Object(x.a)(Object(x.a)({},t.state.localRule),{},{ack:Object(x.a)(Object(x.a)({},t.state.localRule.ack),{},{default:e.target.value})}),isLocalStateWasUpdated:!0})},param1OnSwitch(){t.setState({localRule:Object(x.a)(Object(x.a)({},t.state.localRule),{},{args:t.state.localRule.args.map((function(e,t){return t?e:Object(x.a)(Object(x.a)({},e),{},{default:!e.default||!e.default})}))}),isLocalStateWasUpdated:!0})},confirmOnSwitch(){t.setState({localRule:Object(x.a)(Object(x.a)({},t.state.localRule),{},{ack:Object(x.a)(Object(x.a)({},t.state.localRule.ack),{},{default:!t.state.localRule.ack.default})}),isLocalStateWasUpdated:!0})},breakOnSwitch:()=>Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setState({localRule:Object(x.a)(Object(x.a)({},t.state.localRule),{},{_break:!t.state.localRule._break}),isLocalStateWasUpdated:!0});case 2:case"end":return e.stop()}}),e)})))()}},e.handlers=e.createInputHandlers(),e.handleSetDialogClick=function(t){"id"===t.type&&e.setState({showDialog:!0})},e.handleDialogSelectIdSubmit=function(t){e.setState({localRule:Object(x.a)(Object(x.a)({},e.state.localRule),{},{args:e.state.localRule.args.map((function(e,a){return a?e:Object(x.a)(Object(x.a)({},e),{},{default:t})}))}),isLocalStateWasUpdated:!0})},e}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a,n,r,s;if((null===(a=e.selectedRule)||void 0===a?void 0:a.name)!==(null===(n=this.props.selectedRule)||void 0===n?void 0:n.name)||(null===(r=t.localRule)||void 0===r?void 0:r.name)!==(null===(s=this.state.localRule)||void 0===s?void 0:s.name))this.props.selectedRule&&this.props.selectedRule.name?this.setState({localRule:Object(x.a)({},this.props.selectedRule)}):this.setState({localRule:null});else if(this.state.isLocalStateWasUpdated){var l=this.props.unsavedRules[this.state.localRule.id];Je()(this.props.selectedRule,this.state.localRule)&&!(null===l||void 0===l?void 0:l.wasChangedGlobally)?(this.setState({isLocalStateWasUpdated:!1}),(null===l||void 0===l?void 0:l.wasChangedGlobally)||this.props.removeUnsavedRule(this.state.localRule.id)):l||this.props.pendingSelectedRuleId||this.props.setUnsavedRule(this.state.localRule.id)}else!this.state.isLocalStateWasUpdated&&this.props.unsavedRules[this.state.localRule.id]&&this.setState({isLocalStateWasUpdated:!0});if(this.props.pendingSelectedRuleId&&this.state.isLocalStateWasUpdated){if(this.props.pendingSelectedRuleId===this.state.localRule.id)return;this.setState({confirmChanges:!0})}this.props.lang!==e.lang&&this.forceUpdate()}},{key:"componentDidMount",value:function(){!this.state.localRule&&this.props.selectedRule&&this.setState({localRule:this.props.selectedRule})}},{key:"renderConfirmDialog",value:function(){return this.state.confirmChanges?r.a.createElement(V.a,{fullWidth:!0,open:this.state.confirmChanges,maxWidth:"md"},r.a.createElement(K.a,null,R.a.t("Please confirm or cancel changes before leaving")),r.a.createElement(G.a,null,r.a.createElement(q.a,null,R.a.t("You have changed rule")+": "," ",r.a.createElement("strong",null,this.state.localRule.name)),r.a.createElement(_.a,null,this.createConfirmModalActions()))):null}},{key:"renderSelectIdDialog",value:function(){var e=this;return this.state.showDialog?r.a.createElement(be.a,{socket:this.props.socket,title:"Select ID",onClose:function(t){console.log(t),e.setState({showDialog:!1})},onOk:this.handleDialogSelectIdSubmit}):null}},{key:"render",value:function(){var e=this.state,t=e.localRule,a=e.isLocalStateWasUpdated,n=this.props,s=n.classes,l=n.isLeftBarHidden,i=n.toggleLeftBar,o=t?t.name:"";return r.a.createElement(Q.a,{mt:"30px",className:s.box},t?r.a.createElement(Me.a,{className:s.container,mx:"auto"},r.a.createElement(q.a,{variant:"h4",align:"center",className:a?"":s.mainTitle},o),this.createSaveSettingsForm(),this.createOptionsData().map((function(e){var t=e.title,a=e.item,n=e.id;return a?r.a.createElement(Q.a,{display:"flex",justifyContent:"space-between",mb:"10px",key:n,className:s.row},r.a.createElement(q.a,{variant:"h6",component:"h6",align:"left",className:s.title},t?t+":":""),a):null}))):r.a.createElement("div",{className:s.noRulesText},R.a.t('Create a new rule with a "+" on the left')),r.a.createElement(Q.a,{className:s.toggleIcon,onClick:i},l||!this.props.isMdScreen?r.a.createElement(Fe.a,null):r.a.createElement(We.a,null)),this.renderSelectIdDialog(),this.renderConfirmDialog())}}]),a}(n.PureComponent),Ke=Object(f.a)((function(e){return{box:{display:"inline-flex",justifyContent:"space-around",padding:e.spacing(2),width:"calc(100% - "+e.spacing(4)+"px)",position:"relative","& .outlined-basic":{padding:"12px 10px"},[e.breakpoints.down("md")]:{"& .outlined-basic":{padding:0}}},container:{width:"70%",padding:e.spacing(2),[e.breakpoints.down("md")]:{width:"90%"},[e.breakpoints.down("lg")]:{width:"80%"}},textField:{flexBasis:"60%",[e.breakpoints.down("sm")]:{width:"100%",marginTop:e.spacing(1)}},submitForm:{flexDirection:"row",margin:"10px auto 20px",display:"flex",justifyContent:"center",width:"100%",[e.breakpoints.down("xs")]:{flexDirection:"column"}},mainTitle:{marginBottom:"30px"},title:{marginTop:16,[e.breakpoints.down("md")]:{maxWidth:200},[e.breakpoints.down("sm")]:{width:"100%",maxWidth:"none"}},row:{[e.breakpoints.down("md")]:{alignItems:"center"},[e.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"flex-start",textAlign:"center"}},btnDanger:{marginLeft:20,[e.breakpoints.down("xs")]:{marginLeft:0,marginTop:e.spacing(.5)}},saveAndGoBtn:{marginRight:20,[e.breakpoints.down("xs")]:{marginRight:0,marginBottom:e.spacing(.5)}},toggleIcon:{position:"absolute",top:-15,left:0,backgroundColor:e.palette.primary.main,width:20,height:25,cursor:"pointer",padding:e.spacing(1),borderRadius:"0 5px 5px 0"},switchControl:{paddingTop:e.spacing(1),flexBasis:"60%"},emptyButtons:{height:36,[e.breakpoints.down("sm")]:{height:0}},noRulesText:{fontSize:24,color:e.palette.primary.light}}}))(Ve),qe=a(447),Ge=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).defaultRule={rule:R.a.t("Select rule"),name:R.a.t("New rule"),id:""},e.state={localRule:e.defaultRule,isDisabled:!0},e.setRuleOnMount=function(){var t=e.props,a=t.isEdit,n=t.selectedRule;a&&e.setState({localRule:n})},e.cleanState=function(){e.props.isEdit&&e.props.finishEdit(e.state.localRule),e.setState({localRule:e.defaultRule})},e.getAvaliableOptions=function(){var t=e.props,a=t.commands,n=t.currentRules,r=t.selectedRule,s=t.isEdit,l=null===a||void 0===a?void 0:a.filter((function(e){return!(e.unique&&n.find((function(t){return(null===t||void 0===t?void 0:t.rule)===e.rule})))}));return(null===r||void 0===r?void 0:r.unique)&&s?l.concat(r):l},e.getUniqueName=function(t){var a,n=(null===(a=e.props.currentRules)||void 0===a?void 0:a.map((function(e){return null===e||void 0===e?void 0:e.name}))).filter((function(e){return e.slice(0,e.length-2)===t})),r=e.props.commands.find((function(e){var a=e.rule,n=e.unique;return a===t&&n}));if(n.length){var s=n[n.length-1],l=s.slice(s.length-1);return s.slice(0,s.length-1)+ ++l}return r?t:"".concat(t," 1")},e.createForm=function(){var t=e.state.localRule,a=e.props.classes,n=e.getAvaliableOptions();return r.a.createElement(qe.a,null,r.a.createElement(te.a,{fullWidth:!0},r.a.createElement(ee.a,{shrink:!0,id:"rule"},R.a.t("Rule")),r.a.createElement(H.a,{onChange:function(a){return e.setState({localRule:Object(x.a)(Object(x.a)({},t),{},{rule:a.target.value,name:e.getUniqueName(a.target.value),isError:""}),isDisabled:a.target.value===e.defaultRule.rule})},value:t.rule,labelId:"rule",className:a.select},null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(X.a,{key:e.rule,value:e.rule},e.rule)})))),r.a.createElement(Z.a,{fullWidth:!0,id:"standard-basic",label:e.state.localRule.isError||R.a.t("Name"),value:t.name,onChange:function(a){var n,r=null===(n=e.props.currentRules)||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.name}));e.setState({localRule:Object(x.a)(Object(x.a)({},t),{},{name:a.target.value,isError:r.includes(a.target.value)?"".concat(R.a.t("Name already exist")):""})})},error:!!e.state.localRule.isError,className:a.TextField}))},e.setDialogContent=function(){var t=e.props,a=t.handleClose,n=t.handleSubmitOnCreate,s=t.handleSubmitOnEdit,l=t.isEdit?s:n;return r.a.createElement(G.a,null,e.createForm(),r.a.createElement(_.a,null,r.a.createElement($.a,{onClick:l.bind(Object(Ue.a)(e),e.state.localRule,e.state.localRule.isError),disabled:e.state.isDisabled},"Ok"),r.a.createElement($.a,{onClick:a},R.a.t("Cancel"))))},e}return Object(p.a)(a,[{key:"componentWillUnmount",value:function(){this.cleanState()}},{key:"render",value:function(){return r.a.createElement(V.a,{open:this.props.isOpen,onClose:this.props.handleClose,onExited:this.cleanState,onEnter:this.setRuleOnMount,fullWidth:!0},r.a.createElement(K.a,null,R.a.t(this.props.isEdit?"Edit rule":"Create new rule")),this.setDialogContent())}}]),a}(n.Component),He=Object(f.a)((function(e){return{select:{width:"100%",marginBottom:e.spacing(2.5)},TextField:{marginBottom:e.spacing(1)}}}))(Ge),Xe=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getSelectedLanguageCommands=function(){var e,t,a=(null===(e=n.state)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.language)||R.a.getLanguage();return[{rule:R.a.t("Select rule"),unique:!1}].concat(Object(I.a)(Object.entries(window.commands).map((function(e){var t,n,r,s=Object(D.a)(e,2),l=s[0],i=s[1],o=(i.name,Object(j.a)(i,["name"]));return Object(x.a)(Object(x.a)({},o),{},{rule:null===i||void 0===i?void 0:i.name[a],template:l,unique:i.unique,words:i.words&&i.words[a],args:null===(t=i.args)||void 0===t?void 0:t.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{name:e.name[a]||"",default:e.default||"checkbox"!==e.type&&""})})),ack:i.ack&&Object(x.a)(Object(x.a)({},i.ack),{},{name:i.ack.name[a],default:(null===(n=i.ack)||void 0===n?void 0:n.default)?i.ack.default[a]:"checkbox"!==(null===(r=i.ack)||void 0===r?void 0:r.type)&&""})})}))))},n.commands=n.getSelectedLanguageCommands(),n.moveRule=function(e,t){var a=n.state.currentRules,r=a.find((function(e,a){return a===t})),s=a.filter((function(e,a){return a!==t}));s.splice(e,0,r),n.setState({currentRules:s})},n.handleOpen=function(){n.setState({isOpen:!0})},n.handleClose=function(){n.setState({isOpen:!1})},n.handleSubmitOnCreate=function(e,t){if(!t){var a=Object(L.a)(),r=Object(x.a)(Object(x.a)({},e),{},{id:a,_break:!0}),s=Object(x.a)(Object(x.a)({},n.commands.find((function(e){return e.rule===r.rule}))),r),l=Object.values(n.state.unsavedRules).length;n.setState({currentRules:[].concat(Object(I.a)(n.state.currentRules),[s]),unsavedRules:Object(x.a)(Object(x.a)({},n.state.unsavedRules),{},{[a]:{id:a,wasChangedGlobally:!0}}),selectedRule:l?n.state.selectedRule:s},(function(){l&&n.selectRule(s.id)})),n.handleClose()}},n.handleSubmitOnEdit=function(e,t){t||(n.setState({unsavedRules:Object(x.a)(Object(x.a)({},n.state.unsavedRules),{},{[e.id]:{id:e.id,wasChangedGlobally:!0}}),currentRules:n.updateCurrentRules(e)}),n.handleClose())},n.selectRule=function(e){var t=n.state,a=t.selectedRule,r=t.currentRules;if(a.id===e);else if(n.state.unsavedRules[a.id])n.setState({pendingSelectedRuleId:e});else{var s=r.find((function(t){return t.id===e}));n.setState({selectedRule:s,isLeftBarOpen:!!n.isMdScreen&&n.state.isLeftBarOpen})}},n.updateCurrentRules=function(e){return n.state.currentRules.map((function(t){return t.id===e.id?e:t}))},n.handleEdit=function(){n.setState({isEdit:!0}),n.handleOpen()},n.finishEdit=function(e){var t,a=e.rule,r=e.id,s=e.name,l=e._break,i=e.template;if(n.state.selectedRule.rule!==a){var o=n.commands.find((function(e){return e.rule===a}));t=Object(x.a)(Object(x.a)({},o),{},{name:s,rule:a,id:r,_break:l,template:i})}else t=e;n.setState({isEdit:!1,selectedRule:t})},n.removeRule=function(e){var t=function(){var t=Object(E.a)(y.a.mark((function t(){var a,r,s,l;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.props.readConfig();case 2:a=t.sent,r=a.rules,s=Object(j.a)(a,["rules"]),l=Object(x.a)({rules:r.filter((function(t){return t.id!==e}))},s),n.props.saveConfig(l);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=n.state.currentRules.filter((function(t){return t.id!==e}));n.setState({currentRules:a,selectedRule:a.length?a[a.length-1]:null},t)},n.updateConfig=function(){var e=Object(E.a)(y.a.mark((function e(t){var a,r,s,l,i,o,u,c,d,m;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.unsavedRules,r=t.id,a[r],s=Object(j.a)(a,[r].map(C.a)),e.next=3,n.props.readConfig();case 3:return l=e.sent,i=l.rules,o=Object(j.a)(l,["rules"]),u=i.find((function(e){return e.id===t.id})),c=n.updateCurrentRules(t),d=u?i.map((function(e){return e.id===t.id?n.getRuleShortData(t):e})):[].concat(Object(I.a)(i),[n.getRuleShortData(t)]),m=Object(x.a)({rules:d},o),e.next=11,n.props.saveConfig(m);case 11:n.setState({selectedRule:t||n.state.selectedRule||null,currentRules:c,unsavedRules:s});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getDataFromConfig=Object(E.a)(y.a.mark((function e(){var t,a,r,s,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.readConfig();case 2:return t=e.sent,a=t.rules,r=Object(j.a)(t,["rules"]),s=R.a.getLanguage(),l=a.map((function(e){var t,a,n,r=window.commands[e.template];return Object(x.a)(Object(x.a)({},r),{},{rule:null===r||void 0===r?void 0:r.name[s],ack:Object(x.a)(Object(x.a)({},r.ack),{},{default:e.ack||"checkbox"!==(null===(t=r.ack)||void 0===t?void 0:t.type)&&"",name:null===(a=r.ack)||void 0===a?void 0:a.name[s]}),args:null===(n=r.args)||void 0===n?void 0:n.map((function(t,a){return Object(x.a)(Object(x.a)({},t),{},{default:e.args[a]||"checkbox"!==(null===t||void 0===t?void 0:t.type)&&"",name:(null===t||void 0===t?void 0:t.name[s])||""})})),name:e.name||(null===r||void 0===r?void 0:r.name[s]),words:e.words,_break:e._break,id:e.id||Object(L.a)(),template:e.template})})),e.next=8,n.setState({currentRules:l,selectedRule:l.find((function(e){return e.id===localStorage.getItem("selectedRule")}))||l[l.length-1]||null,settings:r});case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)}))),n.revertChangesFromConfig=function(){var e=Object(E.a)(y.a.mark((function e(t){var a,r,s,l,i,o,u,c,d,m,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state.currentRules,s=n.state.unsavedRules,l=t.id,s[l],i=Object(j.a)(s,[l].map(C.a)),e.next=4,n.props.readConfig();case 4:return o=e.sent,u=o.rules,c=Object(j.a)(o,["rules"]),d=u.find((function(e){return e.id===t.id})),m=null===(a=n.state.unsavedRules[t.id])||void 0===a?void 0:a.wasChangedGlobally,d&&m?p=r.map((function(e){var t;return e.id===d.id?Object(x.a)(Object(x.a)({},e),{},{ack:Object(x.a)(Object(x.a)({},e.ack),{},{default:d.ack||""}),args:null===(t=e.args)||void 0===t?void 0:t.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{default:d.arg||""})})),rule:window.commands[d.template].name[R.a.getLanguage()],words:d.words||"",name:d.name||"",_break:d._break||!0}):e})):d||(p=r.filter((function(e){return e.id!==t.id}))),e.next=11,n.setState({currentRules:p||r,selectedRule:(m?p.find((function(e){return e.id===t.id})):n.state.selectedRule)||null,settings:c,unsavedRules:i});case 11:n.state.currentRules.length!==r.length&&n.setState({selectedRule:n.state.currentRules[n.state.currentRules.length-1]||null});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.saveSettings=function(){var e=Object(E.a)(y.a.mark((function e(t,a){var r,s,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.readConfig();case 2:return r=e.sent,s=r.rules,n.setState({settings:t}),l=Object(x.a)({rules:s},t),e.next=8,n.props.saveConfig(l);case 8:a();case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.setUnsavedRule=function(e){n.setState({unsavedRules:Object(x.a)(Object(x.a)({},n.state.unsavedRules),{},{[e]:{id:e,wasChangedGlobally:!1}})})},n.removeUnsavedRule=function(e){var t=n.state.unsavedRules,a=(t[e],Object(j.a)(t,[e].map(C.a)));n.setState({unsavedRules:a})},n.getRuleShortData=function(e){var t=e._break,a=e.template,n=e.words,r=e.ack,s=e.args,l=e.name,i=e.id;return{words:n||"",ack:(null===r||void 0===r?void 0:r.default)||"",args:(null===s||void 0===s?void 0:s.map((function(e){return e.default})))||[],_break:t,template:a,name:l,id:i}},n.clearStateOnConfirmModalUnmount=function(e){var t=n.state.unsavedRules,a=(t[e],Object(j.a)(t,[e].map(C.a)));n.setState({pendingSelectedRuleId:!1,unsavedRules:a})},n.isLargeScreen=Object(z.c)("lg",n.props.width),n.isMdScreen=Object(z.c)("md",n.props.width),n.isSmScreen=Object(z.c)("sm",n.props.width),n.isMobileScreen=Object(z.c)("xs",n.props.width),n.toggleLeftBar=function(){window.localStorage.setItem("App.menuHidden",!n.state.isLeftBarOpen),n.setState({isLeftBarOpen:!n.state.isLeftBarOpen})},n.closeDrawer=function(){n.setState({isLeftBarOpen:!1})},n.menuSize=parseFloat(window.localStorage.getItem("App.menuSize"))||350,n.state={currentRules:[],isOpen:!1,isEdit:!1,selectedRule:null,unsavedRules:{},isLeftBarOpen:"true"===window.localStorage.getItem("App.menuHidden")},n.commands=n.getSelectedLanguageCommands(),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getDataFromConfig().then((function(t){var a=t.rules,n=Object(j.a)(t,["rules"]),r=a.map((function(e){var t;return e.id&&e.name?e:Object(x.a)(Object(x.a)({},e),{},{id:e.id?e.id:Object(L.a)(),name:e.name?e.name:null===(t=window.commands[e.template])||void 0===t?void 0:t.name[R.a.getLanguage()]})}));Je()(a,r)||e.props.saveConfig(Object(x.a)({rules:r},n))})),this.isMdScreen||this.setState({isLeftBarOpen:!0})}},{key:"componentDidUpdate",value:function(e,t){var a,n,r,s,l;if((null===(a=this.state.settings)||void 0===a?void 0:a.language)!==this.state.lang&&(null===(n=this.state.settings)||void 0===n?void 0:n.language)){var i,o=null===(i=this.state.settings)||void 0===i?void 0:i.language;R.a.setLanguage(o),this.commands=this.getSelectedLanguageCommands()}(null===(r=t.selectedRule)||void 0===r?void 0:r.id)!==(null===(s=this.state.selectedRule)||void 0===s?void 0:s.id)&&(null===(l=t.selectedRule)||void 0===l?void 0:l.id)&&this.state.selectedRule&&localStorage.setItem("selectedRule",this.state.selectedRule.id)}},{key:"renderModalDialog",value:function(){return this.state.isOpen?r.a.createElement(He,{key:"modal",commands:this.commands,isEdit:this.state.isEdit,handleSubmitOnCreate:this.handleSubmitOnCreate,handleSubmitOnEdit:this.handleSubmitOnEdit,handleClose:this.handleClose,isOpen:this.state.isOpen,currentRules:this.state.currentRules,selectedRule:this.state.selectedRule,finishEdit:this.finishEdit}):null}},{key:"render",value:function(){var e=this;console.log(this.state);var t=this.props.classes,a=this.state,n=a.currentRules,s=a.selectedRule,l=a.isLeftBarOpen;return this.isMdScreen?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{key:"splitterLayout",customClassName:Object(N.a)(l?t.hidden:t.opened,t.layout),primaryMinSize:350,primaryIndex:1,secondaryMinSize:350,onSecondaryPaneSizeChange:function(t){return e.menuSize=parseFloat(t)},onDragEnd:function(){window.localStorage.setItem("App.menuSize",e.menuSize.toString())},secondaryInitialSize:this.menuSize},r.a.createElement(ze,{handleOpen:this.handleOpen,rules:n,moveRule:this.moveRule,handleEdit:this.handleEdit,selectRule:this.selectRule,selectedRule:s,removeRule:this.removeRule,settings:this.state.settings,socket:this.props.socket,saveSettings:this.saveSettings,theme:this.props.theme,unsavedRules:this.state.unsavedRules,isMdScreen:this.isMdScreen}),this.state.settings?r.a.createElement(Ke,{selectedRule:s,socket:this.props.socket,updateCurrentRules:this.updateCurrentRules,updateConfig:this.updateConfig,revertChangesFromConfig:this.revertChangesFromConfig,pendingSelectedRuleId:this.state.pendingSelectedRuleId,unsavedRules:this.state.unsavedRules,selectRule:this.selectRule,clearStateOnConfirmModalUnmount:this.clearStateOnConfirmModalUnmount,lang:this.state.settings.language,setUnsavedRule:this.setUnsavedRule,removeUnsavedRule:this.removeUnsavedRule,toggleLeftBar:this.toggleLeftBar,isLeftBarOpen:this.state.isLeftBarOpen,isMdScreen:this.isMdScreen}):null),this.renderModalDialog()):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{anchor:"left",open:this.state.isLeftBarOpen,onClose:this.closeDrawer},r.a.createElement(ze,{handleOpen:this.handleOpen,rules:n,moveRule:this.moveRule,handleEdit:this.handleEdit,selectRule:this.selectRule,selectedRule:s,removeRule:this.removeRule,settings:this.state.settings,socket:this.props.socket,saveSettings:this.saveSettings,theme:this.props.theme,toggleLeftBar:this.toggleLeftBar,unsavedRules:this.state.unsavedRules,isMdScreen:this.isMdScreen,closeDrawer:this.closeDrawer})),this.state.settings?r.a.createElement(Ke,{selectedRule:s,socket:this.props.socket,updateConfig:this.updateConfig,revertChangesFromConfig:this.revertChangesFromConfig,pendingSelectedRuleId:this.state.pendingSelectedRuleId,unsavedRules:this.state.unsavedRules,selectRule:this.selectRule,clearStateOnConfirmModalUnmount:this.clearStateOnConfirmModalUnmount,lang:this.state.settings.language,setUnsavedRule:this.setUnsavedRule,removeUnsavedRule:this.removeUnsavedRule,toggleLeftBar:this.toggleLeftBar,isLeftBarOpen:this.state.isLeftBarOpen,isMdScreen:this.isMdScreen}):null,this.renderModalDialog())}}]),a}(n.PureComponent),Ze=Object(f.a)((function(e){return{layout:{"& .layout-pane:first":{overflow:"hidden"}},hidden:{"& .layout-pane:first-child":{width:"0 !important"},background:e.palette.background.default},opened:{"& .layout-pane-primary":{width:""},overflow:"hidden",background:e.palette.background.default}}}))(Object(z.a)()(Xe)),$e=function(e){Object(g.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).translations={en:a(407),de:a(408),ru:a(409),pt:a(410),nl:a(411),fr:a(412),it:a(413),es:a(414),pl:a(415),"zh-cn":a(416)},R.a.setTranslations(r.translations),R.a.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase()),r}return Object(p.a)(n,[{key:"onConnectionReady",value:function(){var e=this,t={};this.socket.getSystemConfig().then((function(a){return t.systemConfig=a,e.readConfig()})).then((function(t){console.log(t),e.setState({config:t,ready:!0}),t.language!==R.a.getLanguage()&&t.language&&R.a.setLanguage(t.language)})).catch((function(t){return e.showError(t)}))}},{key:"readConfig",value:function(){return this.socket.getObject("system.adapter."+this.adapterName+"."+this.instance).then((function(e){var t=e.native||{};return t.rules=t.rules||[],t.sayitInstance=t.sayitInstance||"",t.language=t.language||"",t.processorId=t.processorId||"",t.processorTimeout=t.processorTimeout||1e3,t}))}},{key:"saveConfig",value:function(e){var t=this;return this.socket.getObject("system.adapter."+this.adapterName+"."+this.instance).then((function(a){if(!Je()(a.native,e))return a.native=e,t.socket.setObject("system.adapter."+t.adapterName+"."+t.instance,a)}))}},{key:"render",value:function(){return this.state.config?r.a.createElement(u.a,{theme:this.state.theme},r.a.createElement("div",{className:"App"},r.a.createElement(Ze,{theme:this.state.theme,socket:this.socket,readConfig:this.readConfig.bind(this),saveConfig:this.saveConfig.bind(this)}),this.renderError())):r.a.createElement(u.a,{theme:this.state.theme},r.a.createElement(b.a,{theme:this.state.themeType}))}}]),n}(O.a),Qe=Object(f.a)((function(e){return{root:{},logo:{width:32,height:32,padding:e.spacing(1),display:"inline-block"}}}))($e),et=a(228),tt=a(218),at=a.n(tt),nt=a(98),rt=a.n(nt);window.adapterName="text2command";var st=rt.a.getThemeName();console.log("iobroker."+window.adapterName+"@"+et.a+' using theme "'+st+'"'),"localhost:3000"!==window.location.host&&i.a({dsn:"https://9806f910556240219f831ecfe2ee3ad1@sentry.iobroker.net/87",release:"iobroker."+window.adapterName+"@"+et.a,integrations:[new o.a]}),function e(){return l.a.render(r.a.createElement(u.a,{theme:at()(st)},r.a.createElement(Qe,{onThemeChange:function(t){st=t,e()}})),document.getElementById("root"))}(),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");c?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):d(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):d(t,e)}))}}()}},[[359,1,2]]]);
//# sourceMappingURL=main.8e3ee399.chunk.js.map